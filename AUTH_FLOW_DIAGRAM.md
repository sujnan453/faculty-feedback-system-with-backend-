# Authentication Flow Diagram

## ğŸ“‹ Complete Login Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER OPENS LOGIN PAGE                        â”‚
â”‚                   (student-login.html)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Firebase Modules Load                               â”‚
â”‚  â€¢ firebase-config.js  â†’ Initialize Firebase                     â”‚
â”‚  â€¢ firebase-storage.js â†’ Database operations                     â”‚
â”‚  â€¢ firebase-auth.js    â†’ Authentication logic                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  User Enters Credentials                         â”‚
â”‚  â€¢ Email: user@example.com                                       â”‚
â”‚  â€¢ Password: ********                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Form Submit Event                             â”‚
â”‚  studentLoginForm.addEventListener('submit', async (e) => {      â”‚
â”‚    e.preventDefault();                                           â”‚
â”‚    // Extract form data                                          â”‚
â”‚    const { email, password } = formData;                         â”‚
â”‚  })                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Is Admin?      â”‚
                    â”‚  superadmin@    â”‚
                    â”‚  system.edu?    â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚       â”‚
                    YES  â”‚       â”‚  NO
                         â”‚       â”‚
                         â–¼       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ADMIN LOGIN PATH                  â”‚  STUDENT LOGIN PATH
        â”‚  1. Check if admin exists          â”‚  1. Find user by email
        â”‚  2. Create if not exists           â”‚  2. Verify role = 'student'
        â”‚  3. Set session                    â”‚  3. Verify password
        â”‚  4. Redirect to admin-dashboard    â”‚  4. Set session
        â”‚                                    â”‚  5. Redirect to student-dashboard
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Storage.findUserByEmail(email)                      â”‚
â”‚  â€¢ Query Firebase: /users/                                       â”‚
â”‚  â€¢ Search for matching email                                     â”‚
â”‚  â€¢ Return user object or null                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  User Found?    â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚       â”‚
                    YES  â”‚       â”‚  NO
                         â”‚       â”‚
                         â–¼       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  VERIFY PASSWORD                   â”‚  SHOW ERROR
        â”‚  if (user.password !== password)   â”‚  "User not found"
        â”‚    â†’ Show error                    â”‚  "Please register"
        â”‚  else                              â”‚
        â”‚    â†’ Continue to session           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Storage.setCurrentUser(user, rememberMe)               â”‚
â”‚  1. Create session data:                                         â”‚
â”‚     {                                                            â”‚
â”‚       ...user,                                                   â”‚
â”‚       sessionStart: timestamp,                                   â”‚
â”‚       lastActivity: timestamp,                                   â”‚
â”‚       rememberMe: boolean                                        â”‚
â”‚     }                                                            â”‚
â”‚  2. Save to sessionStorage (immediate access)                    â”‚
â”‚  3. If rememberMe: Save to Firebase /sessions/{userId}          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LOGIN SUCCESS                                 â”‚
â”‚  â€¢ Show success message                                          â”‚
â”‚  â€¢ Wait 1 second                                                 â”‚
â”‚  â€¢ Redirect to dashboard                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DASHBOARD PAGE LOADS                            â”‚
â”‚  (student-dashboard.html or admin-dashboard.html)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              checkAuth(requiredRole) Called                      â”‚
â”‚  1. Get current user from sessionStorage                         â”‚
â”‚  2. Verify user exists                                           â”‚
â”‚  3. Verify role matches                                          â”‚
â”‚  4. If valid: Return user                                        â”‚
â”‚  5. If invalid: Redirect to login                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  USER AUTHENTICATED                              â”‚
â”‚  â€¢ Dashboard displays user data                                  â”‚
â”‚  â€¢ User can access protected features                            â”‚
â”‚  â€¢ Session persists until logout                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Session Management

### Session Storage (Immediate Access)
```javascript
sessionStorage.setItem('currentUser', JSON.stringify({
  id: "user_id",
  email: "user@example.com",
  name: "User Name",
  role: "student",
  sessionStart: "2026-02-04T10:00:00.000Z",
  lastActivity: "2026-02-04T10:00:00.000Z",
  rememberMe: true
}));
```

### Firebase Storage (Persistent)
```
/sessions/
  â”œâ”€â”€ user_id_1/
  â”‚   â”œâ”€â”€ id: "user_id_1"
  â”‚   â”œâ”€â”€ email: "user@example.com"
  â”‚   â”œâ”€â”€ sessionStart: "2026-02-04T10:00:00.000Z"
  â”‚   â””â”€â”€ lastActivity: "2026-02-04T10:00:00.000Z"
  â””â”€â”€ user_id_2/
      â””â”€â”€ ...
```

## ğŸ—„ï¸ Database Structure

```
Firebase Realtime Database
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ user_id_1/
â”‚   â”‚   â”œâ”€â”€ id: "user_id_1"
â”‚   â”‚   â”œâ”€â”€ name: "Student Name"
â”‚   â”‚   â”œâ”€â”€ email: "student@example.com"
â”‚   â”‚   â”œâ”€â”€ rollNumber: "21CS001"
â”‚   â”‚   â”œâ”€â”€ department: "BCA"
â”‚   â”‚   â”œâ”€â”€ password: "hashed_password"
â”‚   â”‚   â”œâ”€â”€ role: "student"
â”‚   â”‚   â””â”€â”€ registeredAt: "2026-02-04T10:00:00.000Z"
â”‚   â””â”€â”€ admin_id_1/
â”‚       â”œâ”€â”€ id: "admin_id_1"
â”‚       â”œâ”€â”€ name: "Super Administrator"
â”‚       â”œâ”€â”€ email: "superadmin@system.edu"
â”‚       â”œâ”€â”€ username: "superadmin"
â”‚       â”œâ”€â”€ employeeId: "SADM001"
â”‚       â”œâ”€â”€ department: "System Administration"
â”‚       â”œâ”€â”€ password: "SuperAdmin2024!"
â”‚       â”œâ”€â”€ role: "admin"
â”‚       â””â”€â”€ registeredAt: "2026-02-04T10:00:00.000Z"
â”œâ”€â”€ departments/
â”‚   â”œâ”€â”€ dept_id_1/
â”‚   â”‚   â”œâ”€â”€ id: "dept_id_1"
â”‚   â”‚   â”œâ”€â”€ name: "BCA"
â”‚   â”‚   â”œâ”€â”€ fullName: "Bachelor of Computer Applications"
â”‚   â”‚   â””â”€â”€ faculties: []
â”‚   â””â”€â”€ ...
â”œâ”€â”€ surveys/
â”‚   â””â”€â”€ survey_id_1/
â”‚       â”œâ”€â”€ id: "survey_id_1"
â”‚       â”œâ”€â”€ title: "Faculty Feedback Survey"
â”‚       â”œâ”€â”€ department: "BCA"
â”‚       â”œâ”€â”€ semester: "1"
â”‚       â”œâ”€â”€ year: "2026"
â”‚       â”œâ”€â”€ isActive: true
â”‚       â””â”€â”€ questions: [...]
â”œâ”€â”€ feedbacks/
â”‚   â””â”€â”€ feedback_id_1/
â”‚       â”œâ”€â”€ id: "feedback_id_1"
â”‚       â”œâ”€â”€ studentId: "user_id_1"
â”‚       â”œâ”€â”€ surveyId: "survey_id_1"
â”‚       â”œâ”€â”€ responses: [...]
â”‚       â””â”€â”€ submittedAt: "2026-02-04T10:00:00.000Z"
â”œâ”€â”€ questions/
â”‚   â””â”€â”€ question_id_1/
â”‚       â”œâ”€â”€ id: "question_id_1"
â”‚       â”œâ”€â”€ text: "Question text"
â”‚       â”œâ”€â”€ type: "rating"
â”‚       â””â”€â”€ category: "Teaching"
â””â”€â”€ sessions/
    â””â”€â”€ user_id_1/
        â”œâ”€â”€ id: "user_id_1"
        â”œâ”€â”€ sessionStart: "2026-02-04T10:00:00.000Z"
        â””â”€â”€ lastActivity: "2026-02-04T10:00:00.000Z"
```

## ğŸ” Security Flow

### Password Verification (Current - Plain Text)
```javascript
if (user.password !== password) {
  // Password incorrect
  showAlert('Incorrect password');
  return;
}
```

### âš ï¸ Production Recommendation (Hashed)
```javascript
// Registration
const hashedPassword = await bcrypt.hash(password, 10);
user.password = hashedPassword;

// Login
const isValid = await bcrypt.compare(password, user.password);
if (!isValid) {
  showAlert('Incorrect password');
  return;
}
```

## ğŸšª Logout Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     User Clicks Logout Button           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     logout() Function Called             â”‚
â”‚  1. Get current user                     â”‚
â”‚  2. Remove from sessionStorage           â”‚
â”‚  3. Remove from Firebase /sessions/      â”‚
â”‚  4. Redirect to index.html               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     User Logged Out                      â”‚
â”‚  â€¢ Session cleared                       â”‚
â”‚  â€¢ Redirected to home page               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authentication Check Flow (Protected Pages)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Protected Page Loads                   â”‚
â”‚   (e.g., student-dashboard.html)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   checkAuth('student') Called            â”‚
â”‚   1. Get user from sessionStorage        â”‚
â”‚   2. Check if user exists                â”‚
â”‚   3. Check if role matches               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Valid Session? â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
             â”‚       â”‚
        YES  â”‚       â”‚  NO
             â”‚       â”‚
             â–¼       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ALLOW ACCESS          REDIRECT      â”‚
â”‚  â€¢ Return user         â€¢ Clear data  â”‚
â”‚  â€¢ Load dashboard      â€¢ Go to login â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Key Functions

### Storage.findUserByEmail(email)
- **Purpose:** Find user in Firebase by email
- **Returns:** User object or null
- **Async:** Yes

### Storage.setCurrentUser(user, rememberMe)
- **Purpose:** Create user session
- **Storage:** sessionStorage + Firebase (if rememberMe)
- **Returns:** Boolean (success/failure)
- **Async:** Yes

### Storage.getCurrentUser()
- **Purpose:** Get current logged-in user
- **Storage:** sessionStorage
- **Returns:** User object or null
- **Async:** No (synchronous)

### checkAuth(requiredRole)
- **Purpose:** Verify user authentication and role
- **Returns:** User object or null (redirects if invalid)
- **Async:** Yes

### logout()
- **Purpose:** End user session
- **Clears:** sessionStorage + Firebase sessions
- **Redirects:** To index.html
- **Async:** Yes

---

**This flow ensures secure, persistent authentication across the application!** ğŸ”’
